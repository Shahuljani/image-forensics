{"ast":null,"code":"import React,{useRef,useState}from\"react\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CameraCapture(_ref){let{onCapture}=_ref;const videoRef=useRef();const[streaming,setStreaming]=useState(false);const startCamera=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({video:true});videoRef.current.srcObject=stream;await videoRef.current.play();setStreaming(true);}catch(e){alert(\"Camera access denied or not available.\");}};const stopCamera=()=>{var _videoRef$current;const stream=(_videoRef$current=videoRef.current)===null||_videoRef$current===void 0?void 0:_videoRef$current.srcObject;if(stream){const tracks=stream.getTracks();tracks.forEach(t=>t.stop());videoRef.current.srcObject=null;}setStreaming(false);};const capture=()=>{if(!videoRef.current)return;const canvas=document.createElement(\"canvas\");canvas.width=videoRef.current.videoWidth;canvas.height=videoRef.current.videoHeight;const ctx=canvas.getContext(\"2d\");ctx.drawImage(videoRef.current,0,0);canvas.toBlob(blob=>{const file=new File([blob],\"capture.jpg\",{type:\"image/jpeg\"});onCapture(file);// stop after capture\nstopCamera();},\"image/jpeg\",0.95);};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:\"\\uD83D\\uDCF7 Camera\"}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"w-full h-48 bg-black rounded mb-3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:!streaming?/*#__PURE__*/_jsx(\"button\",{onClick:startCamera,className:\"px-3 py-2 rounded bg-green-600 text-white\",children:\"Open Camera\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:capture,className:\"px-3 py-2 rounded bg-indigo-600 text-white\",children:\"Capture\"}),/*#__PURE__*/_jsx(\"button\",{onClick:stopCamera,className:\"px-3 py-2 rounded bg-red-500 text-white\",children:\"Close\"})]})})]});}","map":{"version":3,"names":["React","useRef","useState","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CameraCapture","_ref","onCapture","videoRef","streaming","setStreaming","startCamera","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","play","e","alert","stopCamera","_videoRef$current","tracks","getTracks","forEach","t","stop","capture","canvas","document","createElement","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","toBlob","blob","file","File","type","className","children","ref","onClick"],"sources":["C:/MY PROJECTS/image-forensics/frontend/src/components/CameraCapture.jsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\r\n\r\nexport default function CameraCapture({ onCapture }){\r\n  const videoRef = useRef();\r\n  const [streaming, setStreaming] = useState(false);\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n      videoRef.current.srcObject = stream;\r\n      await videoRef.current.play();\r\n      setStreaming(true);\r\n    } catch (e){\r\n      alert(\"Camera access denied or not available.\");\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    const stream = videoRef.current?.srcObject;\r\n    if (stream) {\r\n      const tracks = stream.getTracks();\r\n      tracks.forEach(t => t.stop());\r\n      videoRef.current.srcObject = null;\r\n    }\r\n    setStreaming(false);\r\n  };\r\n\r\n  const capture = () => {\r\n    if (!videoRef.current) return;\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = videoRef.current.videoWidth;\r\n    canvas.height = videoRef.current.videoHeight;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(videoRef.current, 0, 0);\r\n    canvas.toBlob((blob) => {\r\n      const file = new File([blob], \"capture.jpg\", { type: \"image/jpeg\" });\r\n      onCapture(file);\r\n      // stop after capture\r\n      stopCamera();\r\n    }, \"image/jpeg\", 0.95);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 border rounded-lg flex flex-col items-center\">\r\n      <div className=\"mb-2\">ðŸ“· Camera</div>\r\n      <video ref={videoRef} className=\"w-full h-48 bg-black rounded mb-3\" />\r\n      <div className=\"flex gap-2\">\r\n        {!streaming ? (\r\n          <button onClick={startCamera} className=\"px-3 py-2 rounded bg-green-600 text-white\">Open Camera</button>\r\n        ) : (\r\n          <>\r\n            <button onClick={capture} className=\"px-3 py-2 rounded bg-indigo-600 text-white\">Capture</button>\r\n            <button onClick={stopCamera} className=\"px-3 py-2 rounded bg-red-500 text-white\">Close</button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}